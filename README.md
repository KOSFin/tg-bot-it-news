# Система мониторинга и публикации IT-новостей

Система автоматически собирает новости из различных IT-источников, обрабатывает их с помощью нейросети и публикует в Telegram-канал.

## Особенности

- Автоматический сбор новостей из различных источников
- Обработка статей с помощью нейросети (Groq API)
- Публикация одобренных статей в Telegram-канал
- Независимые процессы для парсинга, обработки и публикации
- Очереди для обработки и публикации статей
- Поддержка развертывания на Vercel

## Структура проекта

- `main.py` - основной скрипт, запускающий все процессы параллельно
- `parse_news.py` - скрипт для парсинга новостей из источников
- `process_queue.py` - скрипт для обработки очереди статей нейросетью
- `publish_queue.py` - скрипт для публикации статей из очереди
- `ai_processor.py` - модуль для обработки статей с помощью нейросети
- `bot.py` - модуль для работы с Telegram API
- `russian_news_sources.py` - модуль с источниками новостей
- `utils.py` - вспомогательные функции
- `data/` - директория для хранения данных (очереди, логи и т.д.)
- `api/` - директория для Vercel Serverless Functions
- `vercel.json` - конфигурация для Vercel

## Требования

- Python 3.8+
- Установленные зависимости из `requirements.txt`
- API ключ для Groq
- Токен Telegram бота и ID канала

## Установка

1. Клонируйте репозиторий
2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
3. Создайте файл `.env` со следующими переменными:
   ```
   GROQ_API_KEY=ваш_ключ_groq_api
   TELEGRAM_TOKEN=токен_вашего_бота
   TELEGRAM_CHANNEL_ID=id_вашего_канала
   ```

## Запуск

### Запуск всей системы

Для запуска всей системы (парсинг, обработка и публикация) выполните:

```
python main.py
```

### Запуск отдельных компонентов

Вы также можете запустить каждый компонент системы отдельно:

1. Парсинг новостей:
   ```
   python parse_news.py
   ```

2. Обработка статей нейросетью:
   ```
   python process_queue.py
   ```

3. Публикация статей:
   ```
   python publish_queue.py
   ```

## Настройка

### Интервалы времени

В файлах можно настроить следующие параметры:

- `NEWS_CHECK_DELAY` - интервал между проверками новостей (по умолчанию 300 секунд / 5 минут)
- `AI_REQUEST_DELAY` - интервал между запросами к нейросети (по умолчанию 60 секунд / 1 минута)
- `PUBLICATION_DELAY` - интервал между публикациями (по умолчанию 10 секунд)

### Источники новостей

Источники новостей настраиваются в файле `russian_news_sources.py`.

## Логика работы

1. **Парсинг новостей**:
   - Система периодически проверяет источники новостей
   - Новые статьи добавляются в очередь на обработку

2. **Обработка статей**:
   - Статьи из очереди обрабатываются нейросетью
   - Нейросеть решает, стоит ли публиковать статью
   - Одобренные статьи добавляются в очередь на публикацию

3. **Публикация статей**:
   - Статьи из очереди на публикацию публикуются в Telegram-канал
   - Публикация происходит с заданным интервалом (по умолчанию 10 секунд)

## Развертывание на Vercel

Проект настроен для развертывания на Vercel с использованием Serverless Functions.

### Подготовка к развертыванию

1. Создайте аккаунт на [Vercel](https://vercel.com/) и подключите его к GitHub
2. Форкните этот репозиторий или создайте новый
3. Добавьте переменные окружения в настройках проекта на Vercel:
   - `GROQ_API_KEY`
   - `TELEGRAM_TOKEN`
   - `TELEGRAM_CHANNEL_ID`

### Настройка вебхука для Telegram

После развертывания на Vercel, настройте вебхук для вашего Telegram бота:

```
https://api.telegram.org/bot<TELEGRAM_TOKEN>/setWebhook?url=<VERCEL_URL>/api/index
```

Где:
- `<TELEGRAM_TOKEN>` - токен вашего Telegram бота
- `<VERCEL_URL>` - URL вашего проекта на Vercel (например, https://your-project.vercel.app)

## Примечания

- Каждый процесс работает независимо от других
- Обработка статей нейросетью происходит не чаще чем раз в минуту
- Публикация статей происходит не чаще чем раз в 10 секунд
- Все данные хранятся в директории `data/`

## Лицензия

MIT